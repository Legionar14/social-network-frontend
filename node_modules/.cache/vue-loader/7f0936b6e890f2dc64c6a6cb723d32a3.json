{"remainingRequest":"/home/novalite/internship-project/social-network-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/novalite/internship-project/social-network-vue/src/components/Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/novalite/internship-project/social-network-vue/src/components/Users.vue","mtime":1570108312909},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Posts from './Posts.vue'\nimport Navbar from './Navbar.vue'\nimport FriendsList from './FriendsList.vue'\nimport axios from 'axios'\n\nexport default {\n    name: 'Users',\n    props:['username'],\n    components: {\n        Posts,\n        Navbar,\n        FriendsList\n    },\n    data() {\n        return {\n            user: JSON,\n            currentUser: JSON.parse(localStorage.getItem('user')),\n            token: JSON.parse(sessionStorage.getItem('token')),\n            renderComponent: true\n        }\n    },\n    created() {\n        axios.defaults.headers['jw_token'] = this.token;\n\n        axios.get(`http://localhost:9000/users/${this.username}`)\n        .then((response) => { this.user = response.data[0] }, error => {\n            if(error.response.status === 401) {\n                this.$bvModal.show('unauthorized')\n            }\n        }).then(() => { this.forceRender() })\n    },\n    methods: {\n        addFriend() {\n            axios.defaults.headers['jw_token'] = this.token;\n\n            axios.post(`http://localhost:9000/addFriend`, {\n                userOne: this.currentUser.id,\n                userTwo: this.user.id,\n                status: 'pending'\n            }).then(() => this.$bvModal.show('fRequestS')).then(() => {\n                localStorage.setItem('sentRequest', JSON.stringify(this.currentUser.username));\n                this.forceRender();\n            }).catch(() => {this.$bvModal.show('fRequestE')})\n        },\n        forceRender() {\n            this.renderComponent = false;\n\n            this.$nextTick(() => {\n                this.renderComponent = true;\n            })\n        }\n    }\n}\n",{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/components","sourcesContent":["<template>\n     <div>\n        <Navbar />\n        <b-modal id=\"fRequestS\" hide-footer title=\"Friend request\">\n            <p>You sent friend request to {{user.username}}</p>\n        </b-modal>\n        <b-modal id=\"fRequestE\" hide-footer title=\"Friend request\">\n            <p>You and {{user.username}} are alredy friends</p>\n        </b-modal>\n        <b-modal id=\"unauthorized\" hide-footer  title=\"Unauthorized\" hide-header-close>\n            <p>You need to be loged in to see this page.</p>\n            <b-button class=\"m-2\" href=\"/\">Log in</b-button>\n            <b-button class=\"m-2\" href=\"/signup\">Sign up</b-button>\n        </b-modal>\n         <div class=\"profile container\">\n             <b-form class=\"formProfile\">\n                 <b-col>\n                    <b-row class=\"flex\" no-gutters>\n                        <h5>Profile info</h5>\n                    </b-row>\n                    <img v-if=\"user.image\" :src=\"user.image\" class=\"profilePicture\">\n                    <img v-if=\"user.image == ''\" src=\"../assets/def.jpg\" alt=\"Profile picture\" class=\"profilePicture\">\n                    <b-row>\n                        <b-form-input type=\"text\" class=\"text\" disabled v-model=\"user.username\"></b-form-input>\n                    </b-row>\n                    <b-row>\n                        <b-form-input type=\"text\" class=\"text\" disabled v-model=\"user.firstName\"></b-form-input>\n                    </b-row>\n                    <b-row>\n                        <b-form-input type=\"text\" class=\"text\" disabled v-model=\"user.lastName\"></b-form-input>\n                    </b-row>\n                    <b-row class=\"flex\">\n                        <b-button v-if=\"currentUser.id != user.id\" @click=\"addFriend()\">Add friend</b-button>\n                    </b-row>\n                 </b-col>\n             </b-form>\n            <Posts v-if=\"renderComponent\" :userId=\"user.id\" class=\"posts\" />\n            <FriendsList v-if=\"renderComponent\" class=\"list\" :userId=\"user.id\"/>\n         </div>\n     </div>\n</template>\n\n<script>\nimport Posts from './Posts.vue'\nimport Navbar from './Navbar.vue'\nimport FriendsList from './FriendsList.vue'\nimport axios from 'axios'\n\nexport default {\n    name: 'Users',\n    props:['username'],\n    components: {\n        Posts,\n        Navbar,\n        FriendsList\n    },\n    data() {\n        return {\n            user: JSON,\n            currentUser: JSON.parse(localStorage.getItem('user')),\n            token: JSON.parse(sessionStorage.getItem('token')),\n            renderComponent: true\n        }\n    },\n    created() {\n        axios.defaults.headers['jw_token'] = this.token;\n\n        axios.get(`http://localhost:9000/users/${this.username}`)\n        .then((response) => { this.user = response.data[0] }, error => {\n            if(error.response.status === 401) {\n                this.$bvModal.show('unauthorized')\n            }\n        }).then(() => { this.forceRender() })\n    },\n    methods: {\n        addFriend() {\n            axios.defaults.headers['jw_token'] = this.token;\n\n            axios.post(`http://localhost:9000/addFriend`, {\n                userOne: this.currentUser.id,\n                userTwo: this.user.id,\n                status: 'pending'\n            }).then(() => this.$bvModal.show('fRequestS')).then(() => {\n                localStorage.setItem('sentRequest', JSON.stringify(this.currentUser.username));\n                this.forceRender();\n            }).catch(() => {this.$bvModal.show('fRequestE')})\n        },\n        forceRender() {\n            this.renderComponent = false;\n\n            this.$nextTick(() => {\n                this.renderComponent = true;\n            })\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}