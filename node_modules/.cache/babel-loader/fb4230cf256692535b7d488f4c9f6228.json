{"remainingRequest":"/home/novalite/internship-project/social-network-vue/node_modules/babel-loader/lib/index.js!/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/novalite/internship-project/social-network-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/novalite/internship-project/social-network-vue/src/components/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/novalite/internship-project/social-network-vue/src/components/Profile.vue","mtime":1570005642664},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/novalite/internship-project/social-network-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Navbar from \"./Navbar.vue\";\nimport FriendsList from \"./FriendsList.vue\";\nimport Posts from \"./Posts.vue\";\nimport axios from 'axios';\nexport default {\n  name: 'Profile',\n  components: {\n    Navbar: Navbar,\n    Posts: Posts,\n    FriendsList: FriendsList\n  },\n  data: function data() {\n    return {\n      user: JSON.parse(localStorage.getItem('user')),\n      edit: false,\n      token: JSON.parse(sessionStorage.getItem('token')),\n      imgPrefix: 'data:image/jpeg;base64, ',\n      img: ''\n    };\n  },\n  methods: {\n    editFun: function editFun() {\n      if (this.edit) {\n        this.edit = false;\n      } else {\n        this.edit = true;\n      }\n    },\n    cancelEdit: function cancelEdit() {\n      this.edit = false;\n    },\n    updateUser: function updateUser() {\n      var _this = this;\n\n      axios.defaults.headers['jw_token'] = this.token;\n      var file = document.querySelector('#fileInput').files[0];\n      var reader = new FileReader();\n\n      if (file) {\n        reader.onload = function () {\n          _this.img = reader.result;\n          axios.put('http://localhost:9000/users/update', {\n            id: _this.user.id,\n            username: _this.user.username,\n            firstName: _this.user.firstName,\n            lastName: _this.user.lastName,\n            password: _this.user.password,\n            image: _this.img\n          }).then(function () {\n            localStorage.removeItem('user');\n            _this.user.image = _this.img;\n            localStorage.setItem('user', JSON.stringify(_this.user));\n            _this.edit = false;\n          });\n        };\n\n        reader.readAsDataURL(file);\n      }\n    }\n  }\n};",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,MAAA;AACA,OAAA,WAAA;AACA,OAAA,KAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,KAAA,EAAA,KAFA;AAGA,IAAA,WAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CADA;AAEA,MAAA,IAAA,EAAA,KAFA;AAGA,MAAA,KAAA,EAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAHA;AAIA,MAAA,SAAA,EAAA,0BAJA;AAKA,MAAA,GAAA,EAAA;AALA,KAAA;AAOA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,OAAA,EAAA,mBAAA;AACA,UAAA,KAAA,IAAA,EAAA;AACA,aAAA,IAAA,GAAA,KAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,GAAA,IAAA;AACA;AACA,KAPA;AAQA,IAAA,UARA,wBAQA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,KAVA;AAWA,IAAA,UAAA,EAAA,sBAAA;AAAA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,KAAA,KAAA;AAEA,UAAA,IAAA,GAAA,QAAA,CAAA,aAAA,CAAA,YAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AACA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;;AAEA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA,UAAA,KAAA,CAAA,GAAA,GAAA,MAAA,CAAA,MAAA;AAEA,UAAA,KAAA,CACA,GADA,CACA,oCADA,EACA;AACA,YAAA,EAAA,EAAA,KAAA,CAAA,IAAA,CAAA,EADA;AAEA,YAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QAFA;AAGA,YAAA,SAAA,EAAA,KAAA,CAAA,IAAA,CAAA,SAHA;AAIA,YAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QAJA;AAKA,YAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QALA;AAMA,YAAA,KAAA,EAAA,KAAA,CAAA;AANA,WADA,EASA,IATA,CASA,YAAA;AACA,YAAA,YAAA,CAAA,UAAA,CAAA,MAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,KAAA,CAAA,GAAA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,YAAA,KAAA,CAAA,IAAA,GAAA,KAAA;AACA,WAdA;AAeA,SAlBA;;AAoBA,QAAA,MAAA,CAAA,aAAA,CAAA,IAAA;AACA;AACA;AAxCA;AAhBA,CAAA","sourcesContent":["<template>\n    <div>\n        <Navbar />\n        <div class=\"profile container\">\n            <b-modal id=\"unauthorized\" hide-footer  title=\"Unauthorized\" hide-header-close>\n                <p>You need to be loged in to see this page.</p>\n                <b-button class=\"m-2\" href=\"/\">Log in</b-button>\n                <b-button class=\"m-2\" href=\"/signup\">Sign up</b-button>\n            </b-modal>\n            <b-form class=\"formProfile\">\n                <b-col>\n                    <b-row class=\"flex\" no-gutters>\n                        <h5>Profile info</h5>\n                        <a href=\"#\" @click=\"editFun\">Edit</a>\n                    </b-row>\n                    <img v-if=\"user.image\" :src=\"user.image\" class=\"profilePicture\">\n                    <img v-if=\"user.image == ''\" src=\"../assets/def.jpg\" alt=\"Profile picture\" class=\"profilePicture\">\n                    <b-row>\n                        <b-form-input type=\"text\" class=\"text\" :disabled=\"!edit\" v-model=\"user.firstName\"></b-form-input>\n                    </b-row>\n                    <b-row>\n                        <b-form-input type=\"text\" class=\"text\" :disabled=\"!edit\" v-model=\"user.lastName\"></b-form-input>\n                    </b-row>\n                    <b-row>\n                        <b-form-file class=\"text\" id=\"fileInput\" :disabled=\"!edit\" placeholder=\"\" accept=\"image/*\">Change photo</b-form-file>\n                    </b-row>\n                    <b-row class=\"flex\">\n                        <b-button v-if=\"edit\" @click=\"updateUser\">Save</b-button>\n                        <a href=\"#\" v-if=\"edit\" class=\"mt-2\" @click=\"cancelEdit()\">Cancel edit</a>\n                    </b-row>\n                </b-col>\n            </b-form>\n            <Posts :userIdProfile=\"user.id\" from=\"profile\" class=\"posts\" />\n            <FriendsList class=\"list\" :userId=\"user.id\" from=\"profile\"/>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Navbar from './Navbar.vue'\nimport FriendsList from './FriendsList.vue'\nimport Posts from './Posts.vue'\nimport axios from 'axios'\n\nexport default {\n    name: 'Profile',\n    components: {\n        Navbar,\n        Posts,\n        FriendsList\n    },\n    data() {\n        return {\n            user: JSON.parse(localStorage.getItem('user')),\n            edit: false,\n            token: JSON.parse(sessionStorage.getItem('token')),\n            imgPrefix: 'data:image/jpeg;base64, ',\n            img: ''\n        }\n    },\n    methods: {\n        editFun: function() {\n            if(this.edit) {\n                this.edit = false;\n            } else {\n                this.edit = true;\n            }\n        },\n        cancelEdit() {\n            this.edit = false;\n        },\n        updateUser: function() {\n            axios.defaults.headers['jw_token'] = this.token;\n\n            let file = document.querySelector('#fileInput').files[0];\n            let reader = new FileReader();\n\n            if(file) {\n                reader.onload = () => {\n                    this.img = reader.result;\n                    \n                    axios\n                    .put('http://localhost:9000/users/update', {\n                        id: this.user.id,\n                        username: this.user.username,\n                        firstName: this.user.firstName,\n                        lastName: this.user.lastName,\n                        password: this.user.password,\n                        image: this.img\n                    })\n                    .then(() => {\n                        localStorage.removeItem('user');\n                        this.user.image = this.img;\n                        localStorage.setItem('user', JSON.stringify(this.user));\n                        this.edit = false;\n                    })\n                }\n\n                reader.readAsDataURL(file)\n            }\n        }\n    }\n}\n</script>\n\n<style>\n.profile {\n    display: grid;\n    grid-template-columns: 1fr 2fr 1fr;\n}\n.posts {\n    grid-column-start: 2\n}\n.list {\n    grid-column-start: 3\n}\n.formProfile {\n    margin-top: 20%;\n    grid-column-start: 1;\n    border: 1px solid #343a40;\n    height: 420px;\n    margin-left: 5%;\n    border-radius: 10px;\n    padding: 5%; \n}\n.text {\n    text-align: center;\n    margin-bottom: 10px;\n}\n.profilePicture {\n    margin-top: 20px;\n}\n.flex {\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between\n}\n</style>"],"sourceRoot":"src/components"}]}